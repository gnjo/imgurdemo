<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
<script src="//gnjo.github.io/use.js"></script>

<div id="x">
</div>
<script>

var x =document.getElementById('x');
  x.ondragover =handleDragOver;
  x.ondrop=handleFileSelect;

function show(d){
 console.log(d)
 var img =document.createElement('img');
 fn.g('x').appendChild(img);
 img.src =d.data.link
}

  function handleDragOver(evt) {
    evt.stopPropagation();
    evt.preventDefault();
   evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
  }
  

function handleFileSelect(evt) {
    evt.stopPropagation();
    evt.preventDefault();
   
   //both ondrop and input type=file
   var files = evt.target.files||evt.dataTransfer.files;

    // Loop through the FileList and render image files as thumbnails.
    ;[].slice.call(files).filter(f=>f.type.match('image.*')).map((f)=>{ 
      // Only process image files.
     
      let reader = new FileReader()
      ,caller = function(e) {
          let data = e.target.result;
          upImgur(data)
          //uploadImageToImgur(data)
          ;
        }
      ;
      reader.onloadend=caller;
      reader.readAsDataURL(f);
     });
     
    }   


var upImgur =function(base64){
 
 let blob = fn.toBlob(base64)
 ,c ='c552bf3081f0790'
 ,formData = new FormData()
  formData.append('type', 'file')
  formData.append('image', blob)

  return fetch('https://api.imgur.com/3/upload.json', {
    method: 'POST',
    headers: {
      Accept: 'application/json',
      Authorization: `Client-ID ${c}` // imgur specific
    },
    body: formData
  })
   .then(d=>d.json())
   .then(show) 
}
 

</script> 
